{% extends './templates/base.html.twig' %} {% block content %}
<script>
  function radioChange(item) {
    if (typeof item == "string") {
      item = JSON.parse(item);
    }

    var radios = document.getElementsByName(item.name);
    for (var i = 0; i < radios.length; i++) {
      if (radios[i].checked) {
        switch (radios[i].value) {
          case "S":
            document.getElementById(item.name).innerHTML = item.sprice;
            break;

          case "M":
            document.getElementById(item.name).innerHTML = item.mprice;
            break;

          case "L":
            document.getElementById(item.name).innerHTML = item.lprice;
            break;
        }
      }
    }
  }
</script>
<div class="container">
  <h1 class="page-header text-center text-uppercase">{{ pageHeader }}</h1>
  {% block items %}
  <div class="row">
    {% for item in menu %} {% if item.stock == true %}
    <div class="col-sm-4 pt-1 pb-1">
      <div class="card text-center">
        <img src="./assets/images/{{ item.name }}.jpg" class="card-img-top" />
        <form>
          <div class="form-group">
            <div class="card-body">
              <h5 class="card-title text-uppercase">{{ item.name }}</h5>
              <div class="card-text">
                {% if item.sizes != null %}
                <div class="row">
                  <div class="col">
                    <div class="row-fluid">
                      <h6 class="text-uppercase">Sizes</h6>
                    </div>
                    <div class="row-fluid">
                      <div class="col d-flex align-items-center">
                        <div class="container-fluid">
                          {% set sizes = item.sizes|split(', ') %} {% for size
                          in sizes %}
                          <div class="form-check form-check-inline">
                            {% if size == sizes[0] %}
                            <input
                              class="form-check-input"
                              type="radio"
                              name="{{ item.name }}"
                              id="{{ item.name }}{{ size }}"
                              value="{{ size }}"
                              onclick="radioChange({{ item|json_encode }})"
                              checked
                            />
                            {% else %}
                            <input
                              class="form-check-input"
                              type="radio"
                              name="{{ item.name }}"
                              id="{{ item.name }}{{ size }}"
                              value="{{ size }}"
                              onclick="radioChange({{ item|json_encode }})"
                            />
                            {% endif %}
                            <label
                              class="form-check-label"
                              for="{{ item.name }}{{ size }}"
                              >{{ size }}</label
                            >
                          </div>
                          {% endfor %}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              {% endif %}
            </div>
            <div class="card-footer">
              <div class="row">
                <div class="col d-flex align-items-center">
                  <div class="container-fluid">
                    $<span id="{{ item.name }}">{{ item.sprice }}</span>
                  </div>
                </div>
                <div class="col d-flex align-items-center">
                  <div class="container-fluid">
                    <button type="submit" class="btn btn-primary">
                      Add to cart
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
    {% if item.sizes != null %}
    <script>
      radioChange({{ item|json_encode|raw }});
    </script>
    {% endif %} {% endif %} {% endfor %}
  </div>
  {% endblock %}
</div>
{% endblock %}
